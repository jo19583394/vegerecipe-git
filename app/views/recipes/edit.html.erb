<div class="recipe-post">
  <%= form_with(model: @recipe, local: true) do |f| %>
    <%= render 'layouts/error_messages', model: f.object %>
    <div class="form-group mt-5">
      <div class="row">
        <div class="d-flex align-items-center"><%= f.label :title, "レシピ名" %></div>
        <div class="col-md-8"><%= f.text_field :title, class: "form-control" %></div>
      </div>
    </div>
    
    <div class="form-group mt-3">
      <div class="row">
        <div class="col-md-4 d-flex align-items-center">
          <%= f.file_field :image %>
        </div>
        <div class="col-md-8">
          <%= f.text_area :catchcopy, class: "form-control", :placeholder => "レシピの魅力を伝えよう" %>
        </div>
      </div>
    </div>
 
    <div class="form-group mt-4">
      <div class="row">
        <div class="d-flex align-items-center"><%= f.label :no_of_dish, "何人分" %></div>
        <div class="col-md-2"><%= f.text_field :no_of_dish, class: "form-control", :placeholder => "何人分"%></div>
      </div>
    </div>
    
    <div class="recipe-ingredients">
      <div class="mx-auto">
        <%= f.fields_for :recipe_ingredients do |t| %>
          <%= render "recipes/recipe_ingredient_fields", f: t %>
        <% end %>
      </div>
      
      <div id="detail-association-insertion-point"></div>
      
      <div class="col-10 mx-auto mt-2">
        <%= link_to_add_association "+フォームを追加", f, :recipe_ingredients,
        class: "btn btn-secondary btn-block",
        data: {
        association_insertion_node: '#detail-association-insertion-point',
        association_insertion_method: 'after'
        }%>
      </div>
    </div>
    
    <h4 class="mt-5">作り方</h4>
    
    <div class="form-group mt-2">
      <%= f.fields_for :how_to_makes, :html => { multipart: true } do |k| %>
        <%= render "recipes/how_to_make_fields", f: k %>
      <% end %>
    </div>
    
    <div id="detail-association-insertion-point2"></div>
    
    
    <div class="col-10 mx-auto">
      <%= link_to_add_association "+フォームを追加", f, :how_to_makes,
      class: "btn btn-secondary btn-block",
      data: {
      association_insertion_node: '#detail-association-insertion-point2',
      association_insertion_method: 'after'
      }%>
    </div>
    <div class="col-10 mx-auto">
      <%= f.submit 'レシピを更新！', class: 'mt-2 btn btn-secondary btn-block' %>
    </div>
  <% end %>
</div>